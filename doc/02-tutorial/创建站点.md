# 创建站点 (Create a Site)

## 🚀 创建新站点

### 1. 运行站点创建命令

在 `frappe-bench` 目录下执行以下命令（示例中站点名为 `library.localhost`，可替换为您的站点名称）：
```bash
bench new-site library.localhost
```

### 2. 输入数据库密码

系统会提示输入 **MySQL/MariaDB 的 root 密码**，用于创建新数据库。

### 3. 设置管理员密码

设置站点管理员（Administrator 用户）的密码，请牢记此密码，后续登录会用到。

### 4. 完成提示

若成功，会显示类似以下信息：
```
Installing frappe...
Updating DocTypes for frappe: [========================================] 100%
Set Administrator password:
*** Scheduler is disabled ***
Current Site set to library.localhost
```

### 5. 失败处理

如果创建失败，系统会提示是否回滚（删除已创建的数据库和站点目录），选择是即可重新尝试。

## 📁 站点目录结构

创建成功后，在 `sites/` 目录下会生成以站点名称命名的文件夹，结构如下：

```
sites/library.localhost/
├── indexes/           # 网站搜索索引
├── locks/             # 文件锁记录
├── logs/              # 日志文件
├── private/
│   ├── backups/       # 数据库备份
│   └── files/         # 需认证访问的文件
├── public/
│   └── files/         # 公开可访问的文件（如图片）
└── site_config.json   # 站点配置文件（数据库连接信息等）
```

> 注意：`site_config.json` 包含数据库名称、密码等敏感信息，请勿纳入版本控制。

## 🌐 在浏览器中访问站点

### 1. 添加 hosts 记录（如需要）

如果无法通过 `http://library.localhost:8000` 访问，需将域名指向本地。可手动编辑 `/etc/hosts` 文件，添加：
```
127.0.0.1 library.localhost
```
或使用 bench 命令自动添加：
```bash
bench --site library.localhost add-to-hosts
```

### 2. 访问站点

在浏览器中打开：  
**http://library.localhost:8000**  
应能看到登录页面。

## 📦 在站点上安装应用

若您已创建自定义应用（如 `library_management`），可将其安装到站点：

```bash
bench --site library.localhost install-app library_management
```

验证安装：
```bash
bench --site library.localhost list-apps
```
输出应包含 `frappe` 和您的应用名称。

> 注：新建站点时默认已安装 `frappe` 应用。

## 👨‍💻 登录 Desk 界面

### 1. 访问 `http://library.localhost:8000`，使用以下凭据登录：
   - **用户名**：Administrator
   - **密码**：创建站点时设置的密码

### 2. 完成首次登录后的设置向导（如语言、地区等）。

### 3. 登录成功后，您将看到 Frappe Desk 管理界面，可开始创建 DocType 等操作。

## 🛠 常用站点管理命令

| 命令 | 功能 |
|------|------|
| `bench --site [站点名] console` | 进入 Python 交互式控制台 |
| `bench --site [站点名] mariadb` | 进入 MariaDB 数据库控制台 |
| `bench --site [站点名] backup` | 备份站点数据库和配置文件 |
| `bench --site [站点名] clear-cache` | 清除缓存 |
| `bench --help` | 查看所有可用的 bench 命令 |

## ▶ 下一步

完成站点创建后，您可以继续：
- **创建 DocType**：定义数据模型
- **配置控制器方法**：添加业务逻辑

如果有任何操作问题，可查阅文档或使用 `bench --help` 获取命令帮助。