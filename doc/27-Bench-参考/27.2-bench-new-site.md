# 27.2 bench new-site

## **用法**

```bash
bench new-site [选项] <站点名称>
```

## **描述**

创建一个新的 Frappe 站点。此操作会在 `./sites` 下创建一个新文件夹，其中包含该站点的所有配置信息，并在您的数据库管理系统中创建一个新数据库，安装所有 Frappe 的模块和 DocType。

站点的配置文件位于 `./sites/{站点名称}/site_config.json`，其中保存了站点的状态信息。如需了解更多，请查看[此指南](https://docs.frappe.io/framework/user/en/bench/guides/sites)。

如果站点创建因任何原因失败，系统会提示您是否要回滚已进行的更改，包括创建的站点目录、数据库和数据库用户。

## **选项**

| 选项 | 描述 |
|------|------|
| `--db-name` | 设置新站点的数据库名称（如果不单独指定，也会用作数据库用户名） |
| `--db-user` | 从 v16 开始，选择数据库用户名或指定现有的用户+密码组合 |
| `--db-password` | 设置新站点的数据库密码，或现有指定数据库用户的密码 |
| `--db-type` | 选择新站点的数据库类型，可选 "postgres" 或 "mariadb"，默认为 "mariadb" |
| `--db-host` | 设置新站点的数据库主机地址 |
| `--db-port` | 设置新站点的数据库端口 |
| `--db-root-username` | 指定 MariaDB 或 Postgres 的 root 用户名 |
| `--db-root-password` | 指定 MariaDB 或 Postgres 的 root 密码 |
| `--admin-password` | 指定新站点的管理员密码 |
| `--source_sql` | 使用 SQL 文件初始化数据库 |
| `--install-app` | 在安装完成后安装指定的应用 |

## **标志**

| 标志 | 描述 |
|------|------|
| `--no-mariadb-socket` | 将 MariaDB 主机设为 %，使用 TCP/IP 套接字而非 UNIX 套接字 |
| `--verbose` | 增加详细输出 |
| `--force` | 如果站点或同名数据库已存在，强制恢复 |

## **示例**

1. **创建一个新站点**
   ```bash
   bench new-site {站点名称}
   ```

2. **创建一个新的 PostgreSQL 站点**
   ```bash
   bench new-site {站点名称} --db-type postgres
   ```

3. **创建新站点时跳过交互式提示**
   （包括管理员密码和 MariaDB root 密码）
   ```bash
   bench new-site {站点名称} \
      --admin-password {管理员密码} \
      --db-root-password {mariadb密码}
   ```

4. **使用非默认和自动生成的值创建新站点**
   ```bash
   bench new-site {站点名称} --db-type {类型} \
      --db-name {名称} \
      --db-user {用户} \
      --db-password {密码} \
      --db-host {主机} \
      --db-port {端口}
   ```

5. **使用具有数据库创建权限的 MariaDB 非 root 用户创建新站点**
   ```bash
   bench new-site {站点名称} \
      --db-root-username {用户} \
      --db-root-password {密码}
   ```

6. **创建新站点并安装当前 Bench 中可用的应用**
   ```bash
   bench new-site {站点名称} --install-app {应用名}
   ```

**相关链接**: https://docs.frappe.io/framework/user/en/bench/reference/new-site