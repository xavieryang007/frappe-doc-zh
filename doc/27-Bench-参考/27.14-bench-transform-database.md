# 27.14 bench transform-database

## **用法**
```bash
bench transform-database [选项] table
```

## **描述**
`transform-database` 命令允许您管理站点数据库表的设置。目前，您可以为指定的表切换存储引擎和行格式（`ROW_FORMAT`）设置。

> 该命令在 **Version 14** 中添加，仅支持 **MariaDB**。  
> MariaDB 10.6 已弃用 Frappe 长期默认使用的 `COMPRESSED` 行格式。此命令旨在帮助升级到更高版本的 MariaDB。

## **选项**
- `--table`：要转换的表的名称（逗号分隔）。若转换所有表，请传入 `'all'`（必需）。
- `--engine`：指定表的存储引擎。可选值为 `InnoDB` 或 `MyISAM`。
- `--row_format`：设置表的 `ROW_FORMAT` 参数。可选值为 `DYNAMIC`、`COMPACT`、`REDUNDANT`、`COMPRESSED`。

## **标志**
- `--failfast`：在首次出现失败时立即退出。

## **示例**

1. **将表 `tabAccess Record` 的引擎更改为 MyISAM**  
   适用于日志表，写入量大、读取少的情况：
   ```bash
   bench --site {site} transform-database --table 'tabAccess Record' --engine 'MyISAM'
   ```

2. **将 MariaDB 从 10.3 升级到 10.7 后，将所有表的行格式从 COMPRESSED 改为 DYNAMIC**：
   ```bash
   bench --site {site} transform-database --table 'all' --row_format 'DYNAMIC'
   ```

## **注意事项**
- 该命令仅适用于 **MariaDB**。
- 使用 `--table all` 时可批量操作所有表，但请谨慎操作，建议先在测试环境验证。
- 若表过大，转换操作可能耗时较长，请确保在维护窗口进行。

**相关链接**: https://docs.frappe.io/framework/user/en/bench/reference/transform-database