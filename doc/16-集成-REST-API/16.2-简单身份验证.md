# 16.2 简单身份验证

## 简单身份验证 (Simple Authentication)

### POST /api/method/login

内容类型：application/x-www-form-urlencoded

参数（在请求体中）：

*   **usr** (字符串)  
    用户名
*   **pwd** (字符串)  
    密码

**示例：**

```bash
curl -X POST https://{你的 frappe 实例}/api/method/login \
  -H 'Content-Type: application/json' \
  -H 'Accept: application/json' \
  -d '{"usr":"Administrator","pwd":"admin"}'
```

**返回：**

*   HTTP 状态码：200
*   application/json：
    ```json
    {
      "home_page": "/desk",
      "full_name": "Administrator",
      "message": "已登录"
    }
    ```
*   Cookie：sid（将此用于认证后续请求）。三天后过期。
    ```
    sid=05d8d46aaebff1c87a90f570a3ff1c0f570a3ff1c87a90f56bacd4;
    path=/;
    domain=.{你的 frappe 实例};
    Expires=Sat, 29 Sep 2018 00:59:54 GMT;
    ```

**错误：**

*   HTTP 状态码：401
*   text/html：用户名或密码错误。

---

### GET /api/method/logout

**示例：**

```bash
curl -X GET https://{你的 frappe 实例}/api/method/logout
```

**返回：**

*   HTTP 状态码：200
*   application/json：`{}`

---

### GET /api/method/frappe.auth.get_logged_user

获取当前已认证用户的 ID。

**示例：**

```bash
curl -X GET https://{你的 frappe 实例}/api/method/frappe.auth.get_logged_user
```

**返回：**

*   HTTP 状态码：200
*   application/json：
    ```json
    {
      "message": "Administrator"
    }
    ```

作者：Raffael Meyer (raffael@alyf.de)