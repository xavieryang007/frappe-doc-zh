# 16.6 操作文档

## 操作文档类型 (Manipulating DocTypes)

文档类型（DocType）是一种特定类型的文档，例如：客户、员工或商品。

文档名称（DocumentName）是文档的唯一 ID，例如：CUST-00001、EMP-00001 或 ITEM-00001。

以下示例中缺少认证。有关更多信息，请参阅[基本认证]和[OAuth2]。

---

### **GET /api/resource/{DocType}**

获取此文档类型的文档列表。

**参数（在路径中）：**

- **DocType** (字符串)  
  你想要接收的文档类型。例如，'Customer'。

**参数（在查询中）：**

- **fields** []  
  默认情况下，只返回 'name' 字段。要添加更多字段，可以传递 fields 参数。例如，`fields=["name","country"]`

- **filters** [[(字符串)]]  
  你可以通过传递 SQL 条件到 filters 参数中来过滤列表。每个条件是格式为 `[{doctype}, {field}, {operator}, {value}]` 的数组。例如，`filters=[["Customer", "country", "=", "India"]]`

- **limit_page_length** (整数)  
  所有列表都将分页。使用此参数可以更改页面大小（一次返回多少项）。默认值：20。

- **limit_start** (整数)  
  要请求后续页面，传递你的 limit_page_length 的倍数作为 limit_start。例如，要请求第二页，传递 limit_start 为 20。

**示例：**

获取电话号码为 4915227058038 的所有客户的最多 20 个姓名（ID）。

```bash
curl -X GET "https://{你的 frappe 实例}/api/resource/Customer?fields=[\"name\"]&filters=[[\"Customer\",\"phone\",\"=\",\"4915227058038\"]]"
```

**返回：**

```json
{
  "data": [
    {
      "name": "CUST-00001"
    }
  ]
}
```

---

### **POST /api/resource/{DocType}**

创建此文档类型的新文档。

**参数（在路径中）：**

- **DocType** (字符串)  
  你想要创建的文档类型。例如，'Customer'。

**内容类型：** application/json

**请求体：** `{"字段名": 值}`

**示例：**

创建一个名为 Mustermann 的新潜在客户。

```bash
curl -X POST https://{你的 frappe 实例}/api/resource/Lead \
  -H 'Content-Type: application/json' \
  -H 'Accept: application/json' \
  -d '{"lead_name":"Mustermann"}'
```

---

### **GET /api/resource/{DocType}/{DocumentName}**

通过名称（ID）检索特定文档。

**参数（在路径中）：**

- **DocType** (字符串)  
  你想要获取的文档类型。例如，'Customer'。

- **DocumentName** (字符串)  
  你想要获取的文档的名称（ID）。例如，'EMP-00001'。

**示例：**

获取名称为 CUST-00001 的客户。

```bash
curl -X GET https://{你的 frappe 实例}/api/resource/Customer/CUST-00001
```

---

### **PUT /api/resource/{DocType}/{DocumentName}**

更新特定文档。这类似于 PATCH HTTP 请求，你不需要发送整个文档，只需要发送你想要更改的部分。

**参数（在路径中）：**

- **DocType** (字符串)  
  你想要更新的文档类型。例如，'Customer'。

- **DocumentName** (字符串)  
  你想要更新的文档的名称（ID）。例如，'EMP-00001'。

**内容类型：** application/json

**请求体：** `{"字段名": 值}`

**示例：**

更新下次联系日期。

```bash
curl -X PUT https://{你的 frappe 实例}/api/resource/Lead/LEAD-00001 \
  -H 'Accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{"contact_date":"2018-10-08"}'
```

**返回：**

```json
{
  "data": {
    "doctype": "Lead",
    "name": "LEAD-00001",
    "contact_date": "2018-10-08",
    "...": "..."
  }
}
```

---

### **DELETE /api/resource/{DocType}/{DocumentName}**

**参数（在路径中）：**

- **DocType** (字符串)  
  你想要删除的文档类型。例如，'Customer'。

- **DocumentName** (字符串)  
  你想要删除的文档的名称（ID）。例如，'EMP-00001'。

---

### **进一步阅读**

HTTP 头：

- 内容类型 (Content-Type)
- 接受 (Accept)
- 授权 (Authorization)

作者：Raffael Meyer (raffael@alyf.de)