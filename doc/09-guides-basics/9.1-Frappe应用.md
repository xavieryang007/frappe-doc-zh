# 9.1 Frappe应用

## 概述

Frappe应用是基于Frappe平台的Python包，可以位于Python路径的任何位置，并且必须在`apps.txt`文件中进行注册。

## 创建应用

使用`bench new-app`命令创建新的应用，该命令会启动一个交互式shell来收集应用信息。

### 命令示例

```bash
bench new-app sample_app
App Name: sample_app
App Title: Sample App
App Description: This is a sample app.
App Publisher: Acme Inc.
App Icon: icon-linux
App Color: #6DAFC9
App Email: info@example.com
App URL: http://example.com
App License: MIT
```

### 生成的目录结构

```
sample_app
├── license.txt
├── MANIFEST.in
├── README.md
├── sample_app
│   ├── __init__.py
│   ├── sample_app
│   │   └── __init__.py
│   ├── config
│   │   ├── desktop.py
│   │   └── __init__.py
│   ├── hooks.py
│   ├── modules.txt
│   ├── patches.txt
│   └── templates
│       ├── generators
│       │   └── __init__.py
│       ├── __init__.py
│       ├── pages
│       │   └── __init__.py
│       └── statics
└── setup.py
```

## 关键文件详解

### hooks.py

该文件定义了应用的元数据以及与其他Frappe组件（如任务调度、文档更新监听）的集成点。

#### 示例配置

```python
app_name = "sample-app"
app_title = "Sample App"
app_publisher = "Acme Inc."
app_description = "This is a sample app."
app_icon = "fa-linux"
app_color = "black"
app_email = "info@example.com"
app_url = "http://example.com"
app_version = 0.0.1
```

### modules.txt

模块用于组织Frappe中的文档类型（DocType），每个DocType必须关联一个模块。默认情况下，应用会创建一个与应用同名的模块。

#### 示例模块列表（ERPNext应用）

```
accounts
buying
home
hr
manufacturing
projects
selling
setup
stock
support
utilities
contacts
```

## 将应用添加到站点

安装应用后，需要将其添加到站点中。

### 操作步骤

1. 通过Git下载应用：

```bash
bench get-app https://github.com/org/app_name
```

2. 将应用安装到站点：

```bash
bench --site site_name install-app app_name
```

## 注意事项

- 应用必须包含`__init__.py`文件以标识为Python包
- 使用`bench`命令时，确保环境已配置Frappe Bench
- 应用更新后，需重新安装到站点或运行`bench migrate`以应用变更

## 总结

Frappe应用是Frappe框架的核心组成部分，通过以上步骤和文件配置，可以快速创建、配置并部署应用到Frappe站点中。