# 子表文档类型

在 Frappe 框架中，除了每个字段只能存储单一值的文档类型外，还存在一种称为"子表"或"子文档类型"的结构。这种类型用于处理"一对多"关系，即一个主记录可以关联多个子记录。

## 核心概念

- **定义**：子文档类型是一种只能链接到父文档类型的特殊文档类型。
- **创建方法**：在创建文档类型时，勾选 **"Is Child Table"**（是子表）选项即可将其定义为子文档类型。
- **关联方式**：在父文档类型中，添加一个字段类型为 **"Table"**（表格）的字段，并在其选项（Options）中指定子文档类型的名称，从而建立链接。

## 数据存储特点

子文档类型的记录直接附加在其父文档上。当您获取父文档时，其关联的子表数据也会一并获取。

### 示例代码（Python）

```python
>>> person = frappe.get_doc('Person', '000001')
>>> person.as_dict()
{
   'first_name': 'John',
   'last_name': 'Doe',
   'qualifications': [
      {'title': 'Frontend Architect', 'year': '2017'},
      {'title': 'DevOps Engineer', 'year': '2016'},
   ]
}
```

在这个例子中，`qualifications` 就是一个子表字段，包含了多条资格记录。

## 子文档的特殊属性

子文档包含以下特殊属性，用于定义其与父文档的关系：

- `parent`：父文档的名称。
- `parenttype`：父文档的文档类型。
- `parentfield`：父文档中链接到此子表的字段名。
- `idx`：序列号（行号），表示其在父文档表格中的顺序。

## 总结

子表文档类型是 Frappe 框架中实现数据"一对多"关系的关键机制。通过将子文档类型定义为子表，并在父文档中使用表格字段进行链接，可以有效地组织和管理复杂的关联数据。