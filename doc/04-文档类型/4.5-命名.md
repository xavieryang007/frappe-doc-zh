# 命名

在 Frappe 中，每个 DocType 都有一个名为 **name** 的主键，用于唯一标识记录。命名方式可通过以下多种方式配置。

## DocType 自动命名（autoname）

通过设置 DocType 的 `autoname` 属性实现自动命名。

| 类型 | 说明 | 示例 |
|------|------|------|
| **1. field:[字段名]** | 使用指定字段的值作为名称。 | 如 `field:project_code`，则名称取自 `project_code` 字段。 |
| **2. [系列]** | 使用带数字序列的命名模式。 | 如 `PRE.#####` → `PRE00001`、`PRE00002`… |
| **3. naming_series:** | 名称模式由文档中的 `naming_series` 字段决定。 | 若 `naming_series` 值为 `SAL.###`，则按此系列生成。 |
| **4. Prompt** | 需手动输入名称。 | — |
| **5. Format** | 最灵活的方式，支持字段、日期、序列等变量。 | 如 `EXAMPLE-{MM}-test-{field1}-{field2}-{#####}` 可生成 `EXAMPLE-02-test-value1-value2-00001` |

## 通过控制器方法命名

在 DocType 的控制器类中定义 `autoname` 方法，实现自定义命名逻辑。

```python
from frappe.model.naming import getseries

class Project(Document):
    def autoname(self):
        prefix = f"P-{self.customer}-"
        self.name = getseries(prefix, 3)  # 生成如 P-客户名-001
```

## 通过文档命名规则（Document Naming Rule）

可在系统中创建**文档命名规则**，按条件动态应用不同命名序列。

### 适用场景
为同一 DocType 的不同条件设置不同编号规则（如高优先级任务单独编号）。

### 设置项
- **文档类型**：规则适用的 DocType。
- **优先级**：数字越大，优先级越高。
- **条件**：满足条件时触发该规则。
- **编号规则**：设置前缀和位数（如 `todo-high-` + 3位数字 → `todo-high-001`）。

## 命名优先级顺序

1. **文档命名规则（Document Naming Rule）**
2. **控制器中的 `autoname` 方法**
3. **DocType 的 `autoname` 属性**

## 特殊规则

- **子表（Child DocType）** 不遵循命名规则。
- **修订版文档** 会在原名称后添加后缀（如 `-1`、`-2`）。

如果需要进一步了解某一种命名方式的具体配置或示例，请随时告知！