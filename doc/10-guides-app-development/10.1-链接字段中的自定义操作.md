# 10.1 链接字段中的自定义操作

## 描述

在 Frappe 框架中，链接字段（Link Field）默认提供了一些标准操作，如"打开"、"新建"等。但您可以通过扩展 `frappe.ui.form.ControlLink.link_options` 方法，为链接字段添加自定义操作选项。这允许您在用户点击链接字段时显示额外的操作菜单项，执行特定的业务逻辑或导航到自定义页面。

## 代码示例

以下是一个完整的代码示例，展示如何添加一个自定义链接选项：

```javascript
frappe.ui.form.ControlLink.link_options = function(link) {
    return [
        {
            html: `
                <div>
                    <i class="fa fa-star"></i>
                    ${__("Custom Link Option")}
                </div>
            `,
            label: __("Custom Link Option"),
            value: "custom_link_option",
            action: () => {
                // 在这里编写自定义操作的逻辑
                frappe.msgprint(__("您点击了自定义链接选项！"));
            }
        }
    ];
};
```

## 使用方法

1. **放置代码**：将上述代码添加到您的 Frappe 应用的客户端脚本（Client Script）中，或者任何在表单加载时执行的 JavaScript 文件中。
2. **自定义操作逻辑**：在 `action` 函数内编写您需要执行的代码，例如显示消息、打开对话框或导航到其他页面。
3. **测试效果**：刷新包含链接字段的表单，点击链接字段，您将看到新增的"Custom Link Option"选项。点击该选项会触发您定义的 `action` 函数。

## 注意事项

- 确保代码在链接字段初始化之前执行，通常放在客户端脚本的 `onload` 事件中。
- 使用 `__()` 函数对显示文本进行国际化处理，以支持多语言。
- 您可以根据需要添加多个自定义选项，只需在返回的数组中增加更多对象。

通过以上步骤，您可以轻松地为 Frappe 中的链接字段添加灵活的自定义操作，增强用户体验。

---

原始链接: https://docs.frappe.io/framework/user/en/guides/app-development/custom_action_link_field