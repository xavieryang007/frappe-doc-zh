# 13.9 重定向 (Redirects)

## 重定向

您可以通过添加 `website_redirects` 钩子来添加重定向。

可选字段 `redirect_http_status` 允许您指定用于重定向的自定义HTTP状态码 - 如果未指定，默认回退为301。

## 示例

```python
website_redirects = [
    # 绝对路径
    {"source": "/from", "target": "https://mysite/from"},

    # 相对路径
    {"source": "/from", "target": "/main", "redirect_http_status": 307},

    # 使用正则表达式
    {"source": "/from/(.*)", "target": "/main/\1"}
]
```

## 重定向类型说明

### 1. 绝对路径重定向
- 将用户重定向到完全不同的网站或域名
- 示例：`{"source": "/from", "target": "https://mysite/from"}`

### 2. 相对路径重定向
- 在同一个网站内进行重定向
- 可以指定自定义的HTTP状态码
- 示例：`{"source": "/from", "target": "/main", "redirect_http_status": 307}`

### 3. 正则表达式重定向
- 使用正则表达式模式匹配复杂的URL模式
- 可以使用捕获组（如 `(.*)` 和 `\1`）来动态构建目标URL
- 示例：`{"source": "/from/(.*)", "target": "/main/\1"}`

## HTTP状态码说明

- **301 Moved Permanently**：永久重定向，搜索引擎会更新索引
- **307 Temporary Redirect**：临时重定向，适用于维护期间或临时更改
- **默认**：如果不指定 `redirect_http_status`，默认使用301状态码

## 使用场景

1. **网站重构**：当URL结构发生变化时，为旧URL设置重定向到新URL
2. **域名变更**：当网站更换域名时，将所有旧域名下的URL重定向到新域名
3. **URL清理**：将多个相似的URL重定向到规范版本
4. **错误修复**：修复拼写错误或错误的URL，将其重定向到正确的URL

## 注意事项

- 重定向规则按照列表中的顺序执行
- 正则表达式重定向比简单的字符串匹配更灵活
- 复杂的重定向规则可能需要测试以确保正确匹配