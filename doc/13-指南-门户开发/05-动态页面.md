# 13.5 动态页面 (Dynamic Pages)

## 动态页面

您可以使用 Jinja 模板语言渲染动态页面。要查询数据，可以更新传递给模板的上下文对象。

这可以通过添加一个具有相同文件名的 `.py` 文件（例如，对于 `index.md` 文件，添加 `index.py`）并包含一个 `get_context` 方法来实现。

## 示例

如果您想显示一个查看用户的页面，请在 `www/` 文件夹中创建 `users.html` 和 `users.py` 文件。

在 `users.py` 中：

```python
import frappe

def get_context(context):
    context.users = frappe.get_list("User", fields=["first_name", "last_name"])
```

在 `users.html` 中：

```html
### 用户列表

<ul>
{% for user in users %}
    <li>{{ user.first_name }} {{ user.get("last_name", "") }}</li>
{% endfor %}
</ul>
```

## 工作原理

- 通过添加 Python 文件并定义 `get_context` 方法，可以为对应的 HTML/Markdown 页面提供动态数据
- 上下文对象中的变量可以在模板中直接使用
- 这样就能创建基于数据库查询或其他动态内容生成的门户页面

### 注意事项
- 确保 Python 文件与对应的模板文件在同一目录下
- 文件名必须匹配（除了扩展名）
- 上下文对象会自动传递给模板进行渲染