# 静态资源

## 概述
- 静态文件在Frappe框架中通过`/assets`路径提供
- 生产环境中，Nginx直接托管`frappe-bench/sites/assets`目录
- 所有静态资源的URL均以`/assets`开头

## 资源目录结构

### assets文件夹
- **位置**：`frappe-bench/sites/assets`，存放所有静态文件
- **说明**：生产环境由Nginx直接服务此目录

### 公共文件夹（public）
- 每个应用均有自己的`public`文件夹，存放该应用的静态资源
- 通过符号链接映射到`assets/[appname]`目录下
- **示例**：`[appname]/public/images/favicon.png`可通过URL `/assets/[appname]/images/favicon.png`访问
- **用途**：用于存储静态资源，如JS、CSS和图片

### 打包资源（Bundled Assets）
- 打包后的资源（如JS和CSS文件）生成在`assets/[appname]/dist/js`和`assets/[appname]/dist/css`目录
- 访问URL示例：`/assets/[appname]/dist/js/main.bundle.[hash].js`

## 站点资源（Site Assets）
除应用资源外，各站点可拥有独立的静态文件，包括用户上传的文件和备份文件。

### 用户上传文件

#### 公开文件
- **存储位置**：`frappe-bench/sites/[sitename]/public/files`
- **访问路径**：通过`/files/文件名`公开访问

#### 私有文件
- **存储位置**：`frappe-bench/sites/[sitename]/private/files`
- **访问路径**：通过`/private/files/文件名`访问，需授权

### 备份文件
- **存储位置**：`frappe-bench/sites/[sitename]/private/backups`
- **访问路径**：`/backups/备份文件名`，需授权下载

## 资源访问总结

### 应用资源
| 资源类型 | 存储位置 | 访问路径 |
|---------|---------|---------|
| 应用静态文件 | `apps/[appname]/public/` | `/assets/[appname]/` |
| 打包资源 | `sites/assets/[appname]/dist/` | `/assets/[appname]/dist/` |

### 站点专属资源
| 资源类型 | 存储位置 | 访问路径 | 权限要求 |
|---------|---------|---------|---------|
| 公开文件 | `sites/[sitename]/public/files/` | `/files/` | 公开 |
| 私有文件 | `sites/[sitename]/private/files/` | `/private/files/` | 需授权 |
| 备份文件 | `sites/[sitename]/private/backups/` | `/backups/` | 需授权 |

## 开发注意事项

### 开发环境
- 在开发环境中，静态资源由Frappe的Web服务器提供服务
- 无需额外的Nginx配置

### 生产环境
- 生产环境中，建议配置Nginx直接服务`/assets`路径
- 这样可以提高静态资源的访问性能和并发处理能力

### 缓存策略
- 打包资源（Bundled Assets）使用哈希值作为文件名的一部分
- 当文件内容变更时，哈希值会改变，浏览器会自动获取新版本
- 这种机制确保了客户端始终使用最新的资源版本

## 总结
Frappe框架的静态资源管理机制既保证了开发时的便利性，又提供了生产环境下的高性能访问。通过合理的目录结构设计和访问路径规划，实现了资源的有效管理和高效服务。

---
*原文链接：https://docs.frappe.io/framework/user/en/basics/static-assets*