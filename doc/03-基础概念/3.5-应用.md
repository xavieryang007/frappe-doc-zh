# 应用

## 什么是Frappe应用？
- Frappe应用是一个使用Frappe框架的Python包
- 应用存放在`frappe-bench`目录下的`apps`文件夹中
- 默认应用`frappe`是所有应用的基础框架
- 每个应用都应在`apps.txt`中有记录

## 创建应用
使用以下命令在`frappe-bench`目录中创建新应用：
```bash
$ bench new-app custom_app
INFO:bench.app:creating new app custom_app
App Title (default: Custom App):
App Description: Custom Frappe App
App Publisher: John Doe
App Email: custom@johndoe.com
App Icon (default 'octicon octicon-file-directory'):
App Color (default 'grey'):
App License (default 'MIT'):
'custom_app' created at /Users/johndoe/frappe-bench/apps/custom_app
INFO:bench.app:installing custom_app
INFO:bench.utils:./env/bin/pip install -q -e ./apps/custom_app
```

创建过程中会提示输入应用标题、描述、发布者等信息。创建完成后，应用目录会自动添加到`apps.txt`。

## 应用目录结构
新应用`custom_app`的目录结构示例：
```
apps/custom_app
├── MANIFEST.in
├── README.md
├── custom_app
│   ├── __init__.py
│   ├── config
│   │   ├── __init__.py
│   │   ├── desktop.py
│   │   └── docs.py
│   ├── custom_app
│   │   └── __init__.py
│   ├── hooks.py
│   ├── modules.txt
│   ├── patches.txt
│   ├── public
│   │   ├── css
│   │   └── js
│   ├── templates
│   │   ├── __init__.py
│   │   └── includes
│   └── www
├── license.txt
├── requirements.txt
├── dev-requirements.txt
├── package.json
└── setup.py
```

## 关键文件说明

### requirements.txt
- 存储Python依赖包列表
- 安装应用时会自动安装这些依赖

### dev-requirements.txt（可选）
- 存储开发环境依赖
- 语法与requirements.txt相同
- 仅在开发者模式下安装

### package.json
- 用于管理Node.js依赖
- 了解更多相关信息

### hooks.py
- 用于扩展或覆盖Frappe标准行为的事件钩子
- 了解更多关于钩子的信息

### modules.txt
- 列出应用中的所有模块
- 每个DocType属于一个模块
- 了解更多关于模块的信息

### patches.txt
- 存储数据库迁移时运行的补丁文件引用
- 这些补丁按顺序运行，且只运行一次
- 了解更多关于数据库迁移的信息

### public目录
- 静态文件夹，生产环境中可由nginx直接服务
- 文件可通过URL `/assets/custom_app/**/*`访问
- 用于存储直接在客户端使用的静态资源，如JS、CSS和图片

### templates目录
- 用于编写和管理Jinja模板
- 可以按任何方式组织目录结构
- 在使用Jinja模板时，此目录会被直接扫描

### www目录
- 此目录中的文件直接映射到门户页面
- URL与目录结构对应
- 了解更多关于门户页面的信息

## 将应用安装到站点
安装应用到指定站点（会在站点数据库中创建相关表）：
```bash
$ bench --site site_name install-app custom_app

Installing custom_app...
```

验证安装：
```bash
$ bench --site site_name list-apps
frappe
custom_app
```

## 总结
Frappe应用是Frappe框架的基本构建块，通过标准化的目录结构和配置文件，实现了代码的模块化管理和复用。每个应用都可以独立开发、测试和部署，同时又能与其他应用无缝集成。

---
*原文链接：https://docs.frappe.io/framework/user/en/basics/apps*