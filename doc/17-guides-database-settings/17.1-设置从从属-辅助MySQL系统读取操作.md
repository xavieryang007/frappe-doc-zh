# 17.1 设置从从属/辅助MySQL系统读取操作

在正常情况下，系统在同一个数据库上进行读写操作。随着数据量增加或并发活动增多，您可能会开始遇到操作延迟的问题。

一个避免此类延迟的即时解决方案是将读写活动分开，即从副本/次要数据库读取所有数据，并将所有信息写入主数据库/主要数据库。

现在，在Frappe中，您可以在主数据库和副本之间分离读写活动。

## 设置只读环境的步骤

### 1. 前提条件
您应该已经设置了MariaDB主从复制或集群环境。

### 2. 只读副本的配置

在您的 `site_config.json` 文件中，添加以下键以启用从副本/次要系统读取：

```json
"read_from_replica": 1/0,  // 启用（1）或禁用（0）从副本读取
"different_credentials_for_replica": 1/0,  // 如果副本上的数据库凭据不同，则设置为1，否则为0
"replica_host": "副本的IP地址",
"replica_db_port": "副本数据库端口",
"replica_db_name": "副本数据库名称",
"replica_db_password": "副本数据库密码"
```

**注意**：如果您启用了MariaDB主从复制环境，那么数据库名称和密码在主从系统上是相同的。

### 3. 在从属/次要系统上为主机授予访问权限

## 总结

此设置允许您通过配置 `site_config.json` 文件，将数据库的读操作定向到从属/次要MySQL实例，从而提升系统性能并减少主数据库的负载。请确保在应用这些更改前，您的MariaDB主从复制环境已正确配置并运行正常。

---

*来源：https://docs.frappe.io/framework/user/en/guides/database-settings/setup-read-from-secondary-db*  
*翻译时间：2025-11-15*