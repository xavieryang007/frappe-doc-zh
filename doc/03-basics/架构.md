# 架构 (Architecture)

## 核心架构概览

Frappe框架是一个**全栈Web应用框架**，集成了部署生产环境所需的所有组件（数据库、缓存、后台任务、实时通知等）。其架构基于以下关键技术栈：

### 1. Python环境

- 使用`virtualenv`创建独立的Python虚拟环境，支持多版本并存。
- 通过`bench`工具管理项目目录、依赖和进程。

### 2. 目录结构（frappe-bench）

执行 `bench init frappe-bench` 后生成的目录结构如下：
```
frappe-bench/
├── sites/          # 站点配置文件及数据库
├── apps/           # 存放应用（如frappe核心应用）
├── env/            # Python虚拟环境
├── config/         # Redis等服务的配置
└── assets/         # 编译后的前端资源（JS/CSS）
```

### 3. 多进程架构

每个`frappe-bench`环境独立运行以下进程：
- **Web服务**：处理HTTP请求（基于Werkzeug）。
- **Redis**：用于缓存、队列和实时通信。
- **Node.js**：管理前端资源构建和实时Socket.IO连接。

### 4. 核心组件交互

- **数据库**：默认支持MariaDB/MySQL，通过ORM层（DocType）操作数据。
- **后台任务**：使用Redis队列异步执行耗时操作。
- **实时通知**：基于Socket.IO推送数据更新至前端。

## 关键特性

- **多租户支持**：通过`sites`目录隔离不同站点的数据和配置。
- **模块化设计**：功能以"应用（App）"形式封装，可插拔。
- **前后端分离**：后端提供REST API，前端使用Vue.js组件（可选）。

## 扩展建议

若需深入细节（如DocType模型、权限体系、API设计），可查阅文档中的以下章节：
- **Basics → Understanding DocTypes**
- **Python API → Document API**
- **JS API → Server Calls (AJAX)**

如需实战示例，请参考 **Tutorial** 部分的完整教程。