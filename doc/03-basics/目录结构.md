# ç›®å½•ç»“æ„ (Directory Structure)

## Frappeæ¡†æ¶ç›®å½•ç»“æ„æ¦‚è¿°

å½“æ‚¨åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„`frappe-bench`ç›®å½•æ—¶ï¼Œå…¸å‹çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```
.
â”œâ”€â”€ apps
â”œâ”€â”€ config
â”‚   â”œâ”€â”€ redis_cache.conf
â”‚   â”œâ”€â”€ redis_queue.conf
â”‚   â””â”€â”€ redis_socketio.conf
â”œâ”€â”€ env
â”œâ”€â”€ logs
â”œâ”€â”€ Procfile
â””â”€â”€ sites
    â”œâ”€â”€ apps.txt
    â”œâ”€â”€ assets
    â”œâ”€â”€ common_site_config.json
    â””â”€â”€ site1.local
        â”œâ”€â”€ private
        â”œâ”€â”€ public
        â””â”€â”€ site_config.json
```

## å„ç›®å½•åŠæ–‡ä»¶è¯´æ˜

### ğŸ“ **apps**

- å­˜æ”¾Frappeåº”ç”¨çš„æ ¸å¿ƒæ–‡ä»¶ã€‚
- ä½¿ç”¨`bench new-app app_name`å‘½ä»¤åˆ›å»ºçš„æ–°åº”ç”¨ä¼šç”Ÿæˆåœ¨æ­¤ç›®å½•ä¸‹ã€‚
- æ‚¨çš„è‡ªå®šä¹‰åº”ç”¨ä¹Ÿä½äºæ­¤ç›®å½•ï¼Œå¯åœ¨æ­¤è¿›è¡Œç¼–è¾‘å’Œå¼€å‘ã€‚

### ğŸ“ **sites**

- å­˜æ”¾æ‰€æœ‰ç«™ç‚¹çš„æ–‡ä»¶ã€‚
- ä½¿ç”¨`bench new-site site_name`å‘½ä»¤åˆ›å»ºçš„æ–°ç«™ç‚¹ä¼šç”Ÿæˆåœ¨æ­¤ç›®å½•ä¸‹ã€‚
- æ¯ä¸ªç«™ç‚¹é€šè¿‡ç›®å½•ååŒºåˆ†ã€‚

### ğŸ“ **logs**

- å­˜æ”¾å„ç§è¿›ç¨‹çš„æ—¥å¿—æ–‡ä»¶ã€‚
- æ¯ä¸ªæ—¥å¿—æ–‡ä»¶æ ¹æ®å…¶å¯¹åº”çš„è¿›ç¨‹å‘½åã€‚

### ğŸ“ **config**

- å­˜æ”¾Frappeä½¿ç”¨çš„ä¸‰ä¸ªRediså®ä¾‹çš„é…ç½®æ–‡ä»¶ï¼š
  - `redis_cache.conf`ï¼šç”¨äºå†…å­˜ç¼“å­˜ã€‚
  - `redis_queue.conf`ï¼šç”¨äºåå°ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†ã€‚
  - `redis_socketio.conf`ï¼šç”¨äºå®æ—¶é€šä¿¡çš„å‘å¸ƒ/è®¢é˜…ã€‚

### ğŸ“ **env**

- å­˜æ”¾Pythonè™šæ‹Ÿç¯å¢ƒã€‚
- Frappeåº”ç”¨å’ŒPythonåŒ…ä¾èµ–å®‰è£…åœ¨æ­¤ç›®å½•ã€‚

### ğŸ“„ **Procfile**

- ç”¨äºç®¡ç†Frappeçš„å¤šè¿›ç¨‹æœåŠ¡ã€‚é»˜è®¤å†…å®¹å¦‚ä¸‹ï¼š

```plaintext
redis_cache: redis-server config/redis_cache.conf
redis_socketio: redis-server config/redis_socketio.conf
redis_queue: redis-server config/redis_queue.conf
web: bench serve --port 8000
socketio: /usr/bin/node apps/frappe/socketio.js
watch: bench watch
schedule: bench schedule
worker_short: bench worker --queue short --quiet
worker_long: bench worker --queue long --quiet
worker_default: bench worker --queue default --quiet
```

## ğŸ”§ **Procfileä¸­å„è¿›ç¨‹è¯´æ˜**

| è¿›ç¨‹å | ç”¨é€”è¯´æ˜ |
|--------|----------|
| **redis_cache** | Rediså®ä¾‹ï¼Œç”¨äºå†…å­˜ç¼“å­˜ã€‚ |
| **redis_socketio** | Rediså®ä¾‹ï¼Œç”¨äºWebå’ŒSocket.IOè¿›ç¨‹é—´çš„å®æ—¶é€šä¿¡ã€‚ |
| **redis_queue** | Rediså®ä¾‹ï¼Œç”¨äºç®¡ç†åå°ä»»åŠ¡é˜Ÿåˆ—ã€‚ |
| **web** | åŸºäºWerkzeugçš„Python WebæœåŠ¡å™¨ã€‚ |
| **socketio** | Node.jsæœåŠ¡å™¨ï¼Œç”¨äºæµè§ˆå™¨ä¸æœåŠ¡å™¨çš„å®æ—¶Socket.IOè¿æ¥ã€‚ |
| **watch** | ä½¿ç”¨Rollupæ‰“åŒ…JS/CSSèµ„æºï¼Œå¹¶åœ¨æ–‡ä»¶æ›´æ”¹æ—¶é‡æ–°æ„å»ºã€‚ |
| **schedule** | ä½¿ç”¨Python RQè°ƒåº¦åå°ä»»åŠ¡ã€‚ |
| **worker_short** | Pythonå·¥ä½œè¿›ç¨‹ï¼Œè¶…æ—¶æ—¶é—´300ç§’ã€‚ |
| **worker_long** | Pythonå·¥ä½œè¿›ç¨‹ï¼Œè¶…æ—¶æ—¶é—´1500ç§’ã€‚ |
| **worker_default** | Pythonå·¥ä½œè¿›ç¨‹ï¼Œè¶…æ—¶æ—¶é—´300ç§’ã€‚ |

## ğŸ’¡ æ€»ç»“

- Frappeçš„ç›®å½•ç»“æ„æ¸…æ™°ï¼Œä¾¿äºç®¡ç†åº”ç”¨ã€ç«™ç‚¹ã€é…ç½®ã€æ—¥å¿—åŠå¤šè¿›ç¨‹æœåŠ¡ã€‚
- ä½¿ç”¨`bench`å‘½ä»¤å¯ä»¥æ–¹ä¾¿åœ°åˆ›å»ºå’Œç®¡ç†åº”ç”¨ä¸ç«™ç‚¹ã€‚
- å„ç›®å½•å’Œæ–‡ä»¶åˆ†å·¥æ˜ç¡®ï¼Œé€‚åˆå¼€å‘å’Œéƒ¨ç½²ã€‚